{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/pages/PlatMainDraw.vue?74fc","webpack:///./src/App.vue?bb7a","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/pages/Platform.vue?7826","webpack:///./src/pages/PlatLeftTool.vue?ba79","webpack:///src/pages/PlatLeftTool.vue","webpack:///./src/pages/PlatLeftTool.vue?2a99","webpack:///./src/pages/PlatLeftTool.vue","webpack:///./src/pages/PlatMainDraw.vue?2cc2","webpack:///src/pages/PlatMainDraw.vue","webpack:///./src/pages/PlatMainDraw.vue?9c33","webpack:///./src/pages/PlatMainDraw.vue","webpack:///src/pages/Platform.vue","webpack:///./src/pages/Platform.vue?2096","webpack:///./src/pages/Platform.vue","webpack:///./src/router/routes.js","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/pages/PlatLeftTool.vue?e9a9"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","component","staticClass","on","compile","_v","ref","_m","staticStyle","components","directives","methods","addNode","$event","preventDefault","allowDrop","rawName","expression","model","nodeData","callback","$$v","$set","saveInfo","delNode","Form","FormItem","Button","Input","isShowInfoBox","drawLine","lineToNode","linePoints","lineParentId","lineTranslate","activeLine","rectWidth","rectHeight","chooseNode","gText","gType","gPath","id","type","path","dependOn","nodeList","getHandeledData","console","log","ev","drop","handelData","getNode","_this","find","item","findNodeIndex","index","assign","node","forEach","includes","indexOf","updateNode","addDependenceInfo","pid","delDependenceInfo","d3","Date","getTime","toString","g","append","svg","selectAll","clickNode","nodeObj","val","classed","lineStarted","attr","getTranslate","transform","dx","dy","lineDragged","lineEnded","anchor","empty","remove","pNodeId","endX","endY","site","lineToMouseover","isCommon","from","to","isRepeat","circleMouseout","clickLine","keyUp","currKey","e","keyCode","which","charCode","arr","updateCable","updateEachLine","gNode","t1","pathName","start","end","getGroupNodes","nodesObj","rect","topCircle","bottomCircle","text","getRectWidth","str","mounted","document","onkeyup","PlatLeftTool","PlatMainDraw","$refs","drawPlat","redirect","Platform","Vue","use","Router","appRouter","routes","config","productionTip","less","VueAxios","axios","router","render","h","App","$mount"],"mappings":"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","file":"js/app.771676db.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlatMainDraw.vue?vue&type=style&index=0&id=58514e54&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"app\">\n    <router-view></router-view>\n    <!-- <img alt=\"Vue logo\" src=\"./assets/logo.png\">\n    <HelloWorld msg=\"Welcome to Your Vue.js App\"/>-->\n  </div> \n</template>\n\n<script>\n// import HelloWorld from './components/HelloWorld.vue'\n\nexport default {\n  name: 'App',\n  // components: {\n  //   HelloWorld\n  // }\n}\n</script>\n\n<style>\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=63f36160&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"plat-top-contain\"},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.compile}},[_vm._v(\"编译\")])],1),_c('plat-left-tool'),_c('plat-main-draw',{ref:\"drawPlat\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"plat-left-contain\"},[_c('div',{},[_c('h3',{staticStyle:{\"margin-bottom\":\"5px\"}},[_vm._v(\"模型: \")]),_c('div',{staticClass:\"rect-div\",attrs:{\"draggable\":\"true\"}})])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"plat-left-contain\">\r\n    <!-- <svg>\r\n      <rect rx=\"15\" ry=\"15\" width=\"80\" height=\"30\" class=\"rect\"/>\r\n    </svg> -->\r\n    <div class=\"\"><h3 style=\"margin-bottom:5px\">模型: </h3>\r\n    <div class=\"rect-div\" draggable=\"true\" ></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"PlatLeftTool\",\r\n  components: {},\r\n  directives: {\r\n        drag: {\r\n            // 指令的定义\r\n            bind: function(el) {\r\n                console.log('---',this)\r\n                let oDiv = el;  // 获取当前元素\r\n                oDiv.onmousedown = (e) => {\r\n                    // 算出鼠标相对元素的位置\r\n                    let disX = e.clientX - oDiv.offsetLeft;\r\n                    let disY = e.clientY - oDiv.offsetTop;\r\n\r\n                    document.onmousemove = (e) => {\r\n                        // 用鼠标的位置减去鼠标相对元素的位置，得到元素的位置\r\n                        let left = e.clientX - disX;\r\n                        let top = e.clientY - disY;\r\n\r\n                        oDiv.style.left = left + 'px';\r\n                        oDiv.style.top = top + 'px';\r\n                    };\r\n\r\n                    document.onmouseup = () => {\r\n                        document.onmousemove = null;\r\n                        document.onmouseup = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n  },\r\n  methods:{\r\n      drag(e){\r\n           e.dataTransfer.setData(\"Text\",1);\r\n\r\n      }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.rect {\r\n  fill: #fff;\r\n  stroke: #333;\r\n  stroke-width: 1;\r\n}\r\n.rect-div{\r\n    width:80px;\r\n    height: 40px;\r\n    border-radius: 20px;\r\n    border:1px solid #333;\r\n    background: #fff;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlatLeftTool.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlatLeftTool.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PlatLeftTool.vue?vue&type=template&id=a21c3eec&scoped=true&\"\nimport script from \"./PlatLeftTool.vue?vue&type=script&lang=js&\"\nexport * from \"./PlatLeftTool.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PlatLeftTool.vue?vue&type=style&index=0&id=a21c3eec&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a21c3eec\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"plat-main-contain\"},[_c('div',{staticStyle:{\"position\":\"relative\",\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"id\":\"idsw-bpmn\"},on:{\"drop\":_vm.addNode,\"dragover\":function($event){$event.preventDefault();return _vm.allowDrop($event)}}},[_c('svg',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"id\":\"plat\"}},[_c('defs',[_c('marker',{attrs:{\"id\":\"arrowhead\",\"viewBox\":\"0 0 10 10\",\"refX\":\"10\",\"refY\":\"5\",\"markerWidth\":\"6\",\"markerHeight\":\"6\",\"orient\":\"auto\"}},[_c('path',{attrs:{\"d\":\"M 0 0 L 10 5 L 0 10 z\",\"stroke-width\":\"0\",\"stroke\":\"#333\"}})])])])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowInfoBox),expression:\"isShowInfoBox\"}],staticClass:\"info-box\"},[_c('Form',{attrs:{\"label-position\":\"right\",\"label-width\":80}},[_c('FormItem',{attrs:{\"label\":\"任务名\"}},[_c('Input',{staticStyle:{\"width\":\"150px\"},attrs:{\"clearable\":\"\"},model:{value:(_vm.nodeData.name),callback:function ($$v) {_vm.$set(_vm.nodeData, \"name\", $$v)},expression:\"nodeData.name\"}})],1),_c('FormItem',{attrs:{\"label\":\"任务类型\"}},[_c('Input',{staticStyle:{\"width\":\"150px\"},attrs:{\"clearable\":\"\"},model:{value:(_vm.nodeData.type),callback:function ($$v) {_vm.$set(_vm.nodeData, \"type\", $$v)},expression:\"nodeData.type\"}})],1),_c('FormItem',{attrs:{\"label\":\"任务路径\"}},[_c('Input',{staticStyle:{\"width\":\"150px\"},attrs:{\"clearable\":\"\"},model:{value:(_vm.nodeData.path),callback:function ($$v) {_vm.$set(_vm.nodeData, \"path\", $$v)},expression:\"nodeData.path\"}})],1),_c('FormItem',[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveInfo}},[_vm._v(\"保存\")]),_c('Button',{staticStyle:{\"margin-left\":\"12px\"},attrs:{\"type\":\"error\",\"ghost\":\"\"},on:{\"click\":_vm.delNode}},[_vm._v(\"删除\")])],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"plat-main-contain\">\r\n    <div\r\n      id=\"idsw-bpmn\"\r\n      style=\"position: relative; width: 100%; height: 100%\"\r\n      @drop=\"addNode\"\r\n      @dragover.prevent=\"allowDrop($event)\"\r\n    >\r\n      <svg width=\"100%\" height=\"100%\" id=\"plat\">\r\n        <defs>\r\n          <marker\r\n            id=\"arrowhead\"\r\n            viewBox=\"0 0 10 10\"\r\n            refX=\"10\"\r\n            refY=\"5\"\r\n            markerWidth=\"6\"\r\n            markerHeight=\"6\"\r\n            orient=\"auto\"\r\n          >\r\n            <path\r\n              d=\"M 0 0 L 10 5 L 0 10 z\"\r\n              stroke-width=\"0\"\r\n              stroke=\"#333\"\r\n            ></path>\r\n          </marker>\r\n        </defs>\r\n      </svg>\r\n    </div>\r\n\r\n    <div class=\"info-box\" v-show=\"isShowInfoBox\">\r\n      <Form label-position=\"right\" :label-width=\"80\">\r\n        <FormItem label=\"任务名\">\r\n          <Input v-model=\"nodeData.name\" clearable style=\"width: 150px\" />\r\n        </FormItem>\r\n        <FormItem label=\"任务类型\">\r\n          <Input v-model=\"nodeData.type\" clearable style=\"width: 150px\" />\r\n        </FormItem>\r\n        <FormItem label=\"任务路径\">\r\n          <Input v-model=\"nodeData.path\" clearable style=\"width: 150px\" />\r\n        </FormItem>\r\n        <FormItem>\r\n          <Button type=\"primary\" @click=\"saveInfo\">保存</Button>\r\n          <Button type=\"error\" ghost style=\"margin-left: 12px\" @click=\"delNode\"\r\n            >删除</Button\r\n          >\r\n        </FormItem>\r\n      </Form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as d3 from \"d3\";\r\nimport { Form, FormItem, Button, Input } from \"iview\";\r\n\r\nexport default {\r\n  name: \"PlatMainDraw\",\r\n  components: {\r\n    Form,\r\n    FormItem,\r\n    Button,\r\n    Input,\r\n  },\r\n  data() {\r\n    return {\r\n      isShowInfoBox: false,\r\n      drawLine: false,\r\n      lineToNode: null,\r\n      linePoints: [],\r\n      lineParentId: \"\",\r\n      lineTranslate: [],\r\n      activeLine: null,\r\n      rectWidth: 100, //节点的初始宽度\r\n      rectHeight: 50, //节点的初始高度\r\n      chooseNode: null, //点击选中的节点\r\n      gText: \"\",\r\n      gType: \"\",\r\n      gPath: \"\",\r\n      nodeData: {\r\n        id: \"\",\r\n        name: \"\",\r\n        type: \"\",\r\n        path: \"\",\r\n        dependOn: [],\r\n      },\r\n      nodeList: [],\r\n    };\r\n  },\r\n  methods: {\r\n    getHandeledData() {\r\n      console.log(this.nodeList);\r\n    },\r\n    allowDrop(ev) {\r\n      ev.preventDefault();\r\n    },\r\n    drop(ev) {\r\n      ev.preventDefault();\r\n    },\r\n    /**\r\n     * 处理数据\r\n     */\r\n    handelData() {\r\n      let _this = this;\r\n      return {\r\n        getNode(id) {\r\n          return _this.nodeList.find((item) => {\r\n            return item.id == id;\r\n          });\r\n        },\r\n        findNodeIndex(id) {\r\n          let index = -1;\r\n          _this.nodeList.find((item, i) => {\r\n            if (item.id === id) {\r\n              index = i;\r\n            }\r\n            return item.id == id;\r\n          });\r\n          return index;\r\n        },\r\n        addNode(node) {\r\n          _this.nodeList.push(Object.assign({}, node));\r\n        },\r\n        delNode(id) {\r\n          let index = this.findNodeIndex(id);\r\n          if (index === -1) {\r\n            return;\r\n          }\r\n          _this.nodeList.forEach((item) => {\r\n            if (item.dependOn.includes(id)) {\r\n              item.dependOn.splice(item.dependOn.indexOf(id), 1);\r\n            }\r\n          });\r\n          _this.nodeList.splice(index, 1);\r\n        },\r\n        updateNode(id, node) {\r\n          let index = this.findNodeIndex(id);\r\n          if (index === -1) {\r\n            return;\r\n          }\r\n          _this.nodeList.splice(index, 1, node);\r\n        },\r\n        addDependenceInfo(id, pid) {\r\n          let node = this.getNode(id);\r\n          node.dependOn.push(pid);\r\n          this.updateNode(id, node);\r\n        },\r\n        delDependenceInfo(id, pid) {\r\n          let node = this.getNode(id);\r\n          let index = node.dependOn.findIndex((item) => {\r\n            return item === pid;\r\n          });\r\n          if (index === -1) {\r\n            return;\r\n          }\r\n          node.dependOn.splice(index, 1);\r\n          this.updateNode(id, node);\r\n        },\r\n      };\r\n    },\r\n    /**\r\n     * 保存信息\r\n     */\r\n    saveInfo() {\r\n      let id = d3.select(this.chooseNode).attr(\"id\");\r\n      this.handelData().updateNode(id, this.nodeData);\r\n\r\n      d3.select(this.chooseNode).select(\"text\").text(this.nodeData.name);\r\n      let len = this.getRectWidth(this.nodeData.name);\r\n      let x = d3.select(this.chooseNode).select(\"rect\").attr(\"x\");\r\n      let w = d3.select(this.chooseNode).select(\"rect\").attr(\"width\");\r\n      d3.select(this.chooseNode)\r\n        .select(\"rect\")\r\n        .attr(\"width\", len)\r\n        .attr(\"x\", x - (len - w) / 2);\r\n    },\r\n    /**\r\n     * 删除节点,同时删除连接线\r\n     */\r\n    delNode() {\r\n      let id = d3.select(this.chooseNode).attr(\"id\");\r\n      this.handelData().delNode(id);\r\n\r\n      d3.selectAll('path[from=\"' + id + '\"]').remove();\r\n      d3.selectAll('path[to=\"' + id + '\"]').remove();\r\n      d3.select(this.chooseNode).remove();\r\n      this.chooseNode = null;\r\n      this.isShowInfoBox = false;\r\n    },\r\n    /**\r\n     * 添加节点\r\n     */\r\n    addNode(e) {\r\n      let nodeData = {\r\n        id: \"\",\r\n        name: \"\",\r\n        type: \"\",\r\n        path: \"\",\r\n        dependOn: [],\r\n      };\r\n      nodeData.id = new Date().getTime().toString();\r\n      this.handelData().addNode(nodeData); //添加节点数据\r\n\r\n      let svg = d3.select(\"#plat\");\r\n      let x = e.offsetX;\r\n      let y = e.offsetY;\r\n      let _this = this;\r\n\r\n      let g = svg\r\n        .append(\"g\")\r\n        .attr(\"id\", nodeData.id)\r\n        .attr(\"transform\", \"translate(\" + 0 + \", \" + 0 + \")\");\r\n      g.append(\"rect\") //添加一个矩形\r\n        .attr(\"width\", this.rectWidth)\r\n        .attr(\"height\", this.rectHeight)\r\n        .attr(\"x\", x - this.rectWidth / 2)\r\n        .attr(\"y\", y - this.rectHeight / 2)\r\n        .attr(\"rx\", this.rectHeight / 2)\r\n        .attr(\"ry\", this.rectHeight / 2)\r\n        .attr(\"stroke-width\", 1)\r\n        .attr(\"stroke\", \"#333\")\r\n        .attr(\"fill\", \"#fff\");\r\n      g.append(\"circle\")\r\n        .attr(\"class\", \"top-circle\")\r\n        .attr(\"cx\", x)\r\n        .attr(\"cy\", y - this.rectHeight / 2)\r\n        .attr(\"r\", 5);\r\n      g.append(\"circle\")\r\n        .attr(\"class\", \"bottom-circle\")\r\n        .attr(\"cx\", x)\r\n        .attr(\"cy\", y + this.rectHeight / 2)\r\n        .attr(\"r\", 5);\r\n      g.append(\"text\")\r\n        .text(\"\")\r\n        .attr(\"x\", x)\r\n        .attr(\"y\", y)\r\n        .attr(\"dominant-baseline\", \"central\")\r\n        .attr(\"text-anchor\", \"middle\");\r\n      svg\r\n        .selectAll(\"g\")\r\n        .call(\r\n          d3\r\n            .drag()\r\n            .subject(function () {\r\n              let transform = d3.select(this).attr(\"transform\");\r\n              let translate = _this.getTranslate(transform);\r\n              return { x: translate[0], y: translate[1] };\r\n            })\r\n            .on(\"drag\", function () {\r\n              const transform = `translate(${d3.event.x}, ${d3.event.y})`;\r\n              d3.select(this).attr(\"transform\", transform);\r\n              _this.updateCable(this);\r\n            })\r\n            .on(\"end\", function () {\r\n              //         let elem = d3.select(this);\r\n              //         let transform = elem.attr(\"transform\");\r\n              //   let t1 = _this.getTranslate(transform);\r\n            })\r\n        )\r\n        .on(\"click\", function () {\r\n          d3.event.stopPropagation();\r\n          _this.clickNode(this);\r\n        });\r\n      svg.on(\"click\", function () {\r\n        _this.isShowInfoBox = false;\r\n        d3.selectAll(\".click-group\").classed(\"click-group\", false);\r\n        // let nodeObj = _this.getGroupNodes(_this.chooseNode);\r\n        // for (let val in nodeObj) {\r\n        //   nodeObj[val].classed(\"click-group\", false);\r\n        // }\r\n      });\r\n      g.selectAll(\"circle\")\r\n        .call(\r\n          d3\r\n            .drag()\r\n            .on(\"start\", function () {\r\n              _this.lineStarted(this);\r\n            })\r\n            .on(\"drag\", this.lineDragged)\r\n            .on(\"end\", this.lineEnded)\r\n        )\r\n        .on(\"mouseover\", function () {\r\n          _this.lineToMouseover(this);\r\n        })\r\n        .on(\"mouseout\", function () {\r\n          _this.circleMouseout(this);\r\n        });\r\n    },\r\n    /**\r\n     * 点击节点\r\n     */\r\n    clickNode(_this) {\r\n      let id = d3.select(_this).attr(\"id\");\r\n      // let text = d3.select(_this).select(\"text\").text();\r\n      this.nodeData = this.handelData().getNode(id);\r\n      this.isShowInfoBox = true;\r\n      this.chooseNode = _this;\r\n      //改变样式\r\n      d3.selectAll(\".click-group\").classed(\"click-group\", false);\r\n      let nodeObj = this.getGroupNodes(_this);\r\n      for (let val in nodeObj) {\r\n        nodeObj[val].classed(\"click-group\", true);\r\n      }\r\n    },\r\n    /**\r\n     * 开始画线\r\n     */\r\n    lineStarted(_this) {\r\n      this.drawLine = false;\r\n      this.lineParentId = \"\";\r\n      let anchor = d3.select(_this);\r\n      var node = d3.select(_this.parentNode);\r\n      this.lineParentId = node.attr(\"id\");\r\n      let dx = +anchor.attr(\"cx\");\r\n      let dy = +anchor.attr(\"cy\") + 4;\r\n      let transform = node.attr(\"transform\");\r\n      this.lineTranslate = this.getTranslate(transform);\r\n      this.linePoints.push([\r\n        dx + this.lineTranslate[0],\r\n        dy + this.lineTranslate[1],\r\n      ]);\r\n      this.linePoints.push([dx, dy]);\r\n\r\n      this.activeLine = d3\r\n        .select(\"svg\")\r\n        .append(\"path\")\r\n        .attr(\"class\", \"line-to\")\r\n        .attr(\"from\", node.attr(\"id\"))\r\n        .attr(\"start\", dx + \", \" + dy)\r\n        .attr(\"marker-end\", \"url(#arrowhead)\");\r\n    },\r\n    /**\r\n     * 画线过程\r\n     */\r\n    lineDragged() {\r\n      this.drawLine = true;\r\n      this.linePoints[1] = [\r\n        d3.event.x + this.lineTranslate[0],\r\n        d3.event.y + this.lineTranslate[1],\r\n      ];\r\n      let points = this.linePoints;\r\n      this.activeLine.attr(\"d\", function () {\r\n        return (\r\n          \"M\" +\r\n          points[0][0] +\r\n          \",\" +\r\n          points[0][1] +\r\n          \"C\" +\r\n          points[0][0] +\r\n          \",\" +\r\n          (points[0][1] + points[1][1]) / 2 +\r\n          \" \" +\r\n          points[1][0] +\r\n          \",\" +\r\n          (points[0][1] + points[1][1]) / 2 +\r\n          \" \" +\r\n          points[1][0] +\r\n          \",\" +\r\n          points[1][1]\r\n        );\r\n      });\r\n    },\r\n    /**\r\n     * 画线结束\r\n     */\r\n    lineEnded() {\r\n      this.drawLine = false;\r\n      let anchor = d3.selectAll(\"circle.end\");\r\n      if (anchor.empty()) {\r\n        this.activeLine.remove();\r\n      } else {\r\n        let pNode = d3.select(anchor.node().parentNode);\r\n        let pNodeId = pNode.attr(\"id\");\r\n        //更新数据-父节点信息\r\n        this.handelData().addDependenceInfo(pNodeId, this.lineParentId);\r\n\r\n        anchor.classed(\"end\", false);\r\n        this.activeLine.attr(\"to\", pNodeId);\r\n        // var transform = this.lineToNode.attr(\"transform\");\r\n        // let tran = this.getTranslate(transform);\r\n        let [endX, endY] = this.linePoints[1];\r\n        let site =\r\n          anchor\r\n            .attr(\"class\")\r\n            .slice(0, anchor.attr(\"class\").indexOf(\"-circle\")) + \"Circle\"; //top or bottom\r\n        this.activeLine.attr(\"end\", endX + \", \" + endY).attr(\"site\", site);\r\n        // this.activeLine.attr(\"end\", (+d3.event.x-tran[0]) + \", \" + (+d3.event.y-tran[1]));\r\n        let that = this;\r\n        d3.select(\"svg\")\r\n          .selectAll(\".line-to\")\r\n          .on(\"mouseover\", function () {\r\n            d3.select(this).classed(\"line-light\", true);\r\n          })\r\n          .on(\"mouseout\", function () {\r\n            d3.select(this).classed(\"line-light\", false);\r\n          })\r\n          .on(\"click\", function () {\r\n            that.clickLine(this); //点击连线-可按删除键删除\r\n          });\r\n      }\r\n      this.lineToNode = null;\r\n      this.activeLine = null;\r\n      this.linePoints = [];\r\n      this.lineTranslate = null;\r\n    },\r\n    /**\r\n     * 鼠标移入 画线的圈\r\n     */\r\n    lineToMouseover(_this) {\r\n      d3.select(_this).classed(\"mouseLight\", true);\r\n      let lineParentId = this.lineParentId;\r\n      let id = d3.select(_this.parentNode).attr(\"id\");\r\n      //不可自己相连\r\n      var isCommon = lineParentId === id;\r\n      //不可重复连线\r\n      let isRepeat = false;\r\n      if (this.lineParentId) {\r\n        d3.selectAll(\"path.line-to\").each(function () {\r\n          let from = d3.select(this).attr(\"from\");\r\n          let to = d3.select(this).attr(\"to\");\r\n          if (from === lineParentId && to === id) {\r\n            isRepeat = true;\r\n          }\r\n        });\r\n      }\r\n      if (this.drawLine && !isCommon && !isRepeat) {\r\n        this.lineToNode = d3.select(_this.parentNode);\r\n        d3.selectAll(\"circle.end\").classed(\"end\", false);\r\n        d3.select(_this).classed(\"end\", true);\r\n      }\r\n    },\r\n    /**\r\n     * 鼠标移出 画线的圈\r\n     */\r\n    circleMouseout(_this) {\r\n      d3.select(_this).classed(\"mouseLight\", false);\r\n    },\r\n    /**\r\n     * 点击连线\r\n     */\r\n    clickLine(node) {\r\n      d3.event.stopPropagation();\r\n      d3.select(node).classed(\"click-group\", true);\r\n    },\r\n    /**\r\n     * 按键点击事件\r\n     */\r\n    keyUp(ev) {\r\n      var currKey = 0;\r\n      let e = ev || event;\r\n      currKey = e.keyCode || e.which || e.charCode; //按键码\r\n      // var keyName = String.fromCharCode(currKey); //字符\r\n      if (currKey === 46) {\r\n        //删除节点（和其连接线）\r\n        if (this.isShowInfoBox) {\r\n          this.delNode();\r\n        }\r\n        //单独删除线-处理数据-删除父节点信息\r\n        if (d3.select(\"path.click-group\")._groups[0][0] !== null) {\r\n          let id = d3.select(\"path.click-group\").attr(\"to\");\r\n          let pid = d3.select(\"path.click-group\").attr(\"from\");\r\n          this.handelData().delDependenceInfo(id, pid);\r\n          //删除连线\r\n          d3.selectAll(\"path.click-group\").remove();\r\n        }\r\n      }\r\n    },\r\n    /**\r\n     * 获取偏移位置\r\n     */\r\n    getTranslate(transform) {\r\n      var arr = transform\r\n        .substring(transform.indexOf(\"(\") + 1, transform.indexOf(\")\"))\r\n        .split(\",\");\r\n      return [+arr[0], +arr[1]];\r\n    },\r\n    /**\r\n     * 移动模块时更新连线\r\n     */\r\n    updateCable(gNode) {\r\n      let id = d3.select(gNode).attr(\"id\");\r\n      let transform = d3.select(gNode).attr(\"transform\");\r\n      let t1 = this.getTranslate(transform);\r\n      let _this = this;\r\n      // 更新输出线的位置\r\n      d3.selectAll('path[from=\"' + id + '\"]').each(function () {\r\n        _this.updateEachLine(gNode, t1, this, \"from\");\r\n      });\r\n      // 更新输入线的位置\r\n      d3.selectAll('path[to=\"' + id + '\"]').each(function () {\r\n        _this.updateEachLine(gNode, t1, this, \"to\");\r\n      });\r\n    },\r\n    /**\r\n     * 更新连接线\r\n     * _this : 连接线\r\n     */\r\n    updateEachLine(gNode, t1, _this, pathName) {\r\n      let path = d3.select(_this).attr(\"d\");\r\n      let start = [];\r\n      let end = [];\r\n      if (pathName == \"from\") {\r\n        start = d3\r\n          .select(_this)\r\n          .attr(\"start\")\r\n          .split(\",\")\r\n          .map((val, index) => +val + t1[index]);\r\n\r\n        end = path\r\n          .substring(path.lastIndexOf(\" \") + 1)\r\n          .split(\",\")\r\n          .map((item) => +item);\r\n      } else {\r\n        start = path\r\n          .substring(1, path.indexOf(\"C\"))\r\n          .split(\",\")\r\n          .map((item) => +item);\r\n        let siteAttr = d3.select(_this).attr(\"site\");\r\n        end = [\r\n          +this.getGroupNodes(gNode)[siteAttr].attr(\"cx\") + t1[0],\r\n          +this.getGroupNodes(gNode)[siteAttr].attr(\"cy\") + t1[1],\r\n        ];\r\n        // end = d3\r\n        //   .select(_this)\r\n        //   .attr(\"end\")\r\n        //   .split(\",\")\r\n        //   .map((val, index) => +val + t1[index]);\r\n      }\r\n      d3.select(_this).attr(\"d\", function () {\r\n        return (\r\n          \"M\" +\r\n          start[0] +\r\n          \",\" +\r\n          start[1] +\r\n          \" C\" +\r\n          start[0] +\r\n          \",\" +\r\n          (start[1] + end[1]) / 2 +\r\n          \" \" +\r\n          end[0] +\r\n          \",\" +\r\n          (start[1] + end[1]) / 2 +\r\n          \" \" +\r\n          end[0] +\r\n          \",\" +\r\n          end[1]\r\n        );\r\n      });\r\n    },\r\n    /**\r\n     * 获取组合所有节点\r\n     */\r\n    getGroupNodes(_this) {\r\n      let nodesObj = {};\r\n      nodesObj.rect = d3.select(_this).select(\"rect\");\r\n      nodesObj.topCircle = d3.select(_this).select(\"circle.top-circle\");\r\n      nodesObj.bottomCircle = d3.select(_this).select(\"circle.bottom-circle\");\r\n      nodesObj.text = d3.select(_this).select(\"text\");\r\n      return nodesObj;\r\n    },\r\n    /**\r\n     * 获取字的宽度,算节点宽度\r\n     */\r\n    getRectWidth(str) {\r\n      if (str == \"\") {\r\n        return this.rectWidth;\r\n      }\r\n      let chinese = str.match(/[^\\x00-\\xff]/g); // eslint-disable-line\r\n      let chineseLen = chinese ? chinese.length : 0;\r\n      let len = (str.length - chineseLen) / 2 + chineseLen;\r\n      let length = len * 14 + 28;\r\n\r\n      return length < this.rectWidth ? this.rectWidth : length;\r\n    },\r\n  },\r\n  mounted() {\r\n    // this.init();\r\n    document.onkeyup = this.keyUp;\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.info-box {\r\n  height: auto;\r\n  width: 250px;\r\n  padding: 15px 2px;\r\n  border: 1px solid #06a2d6;\r\n  box-shadow: rgba(204, 204, 204, 0.8) 0 0 5px;\r\n  background-color: #fff;\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlatMainDraw.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlatMainDraw.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PlatMainDraw.vue?vue&type=template&id=58514e54&scoped=true&\"\nimport script from \"./PlatMainDraw.vue?vue&type=script&lang=js&\"\nexport * from \"./PlatMainDraw.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PlatMainDraw.vue?vue&type=style&index=0&id=58514e54&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"58514e54\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"container\">\r\n    <!-- <plat-top-tool></plat-top-tool> -->\r\n    <div class=\"plat-top-contain\">\r\n      <Button type=\"primary\" @click=\"compile\">编译</Button>\r\n    </div>\r\n    <plat-left-tool></plat-left-tool>\r\n    <plat-main-draw ref=\"drawPlat\"></plat-main-draw>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport PlatLeftTool from \"./PlatLeftTool\";\r\n// import PlatTopTool from \"./PlatTopTool\";\r\nimport PlatMainDraw from \"./PlatMainDraw\";\r\nimport { Button } from \"iview\";\r\n\r\nexport default {\r\n  name: \"Platform\",\r\n  components: {\r\n    PlatLeftTool,\r\n    // PlatTopTool,\r\n    PlatMainDraw,\r\n    Button,\r\n  },\r\n  methods: {\r\n    compile() {\r\n      this.$refs.drawPlat.getHandeledData();\r\n      // axios.post('/api/post', {\r\n      //     stuName: '',\r\n      //     height: 180\r\n      //   }).then((response) => {\r\n      //     console.log(response);\r\n      //     console.log(response.data);\r\n      //     this.postData = response.data;\r\n      //   }).catch((error) => {\r\n      //     console.log(error);\r\n      //   });\r\n\r\n    },\r\n  },\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Platform.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Platform.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Platform.vue?vue&type=template&id=84edb9a6&\"\nimport script from \"./Platform.vue?vue&type=script&lang=js&\"\nexport * from \"./Platform.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Platform from '../pages/Platform.vue'\r\n\r\nexport default [\r\n    {\r\n        path: '/',\r\n        redirect: '/index'\r\n    },\r\n    {\r\n        name: 'index',\r\n        path:'/index',\r\n        component: Platform\r\n    }\r\n]","import Vue from 'vue';\r\nimport Router from 'vue-router';\r\nimport routes from './routes'\r\n\r\nVue.use(Router);\r\n\r\nconst appRouter = new Router({\r\n    routes\r\n});\r\n\r\nexport default appRouter;","import Vue from 'vue'\nimport App from './App.vue'\n\nimport router from './router/index'\nimport less from 'less'\nimport './style/common.less'\nimport 'iview/dist/styles/iview.css'; // 导入样式\n\nimport axios from 'axios'\nimport VueAxios from 'vue-axios'\n\nVue.config.productionTip = false\n\nVue.use(less)\nVue.use(VueAxios, axios)\n\n\n\nnew Vue({\n  router,\n  render: h => h(App),\n}).$mount('#app')","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlatLeftTool.vue?vue&type=style&index=0&id=a21c3eec&lang=less&scoped=true&\""],"sourceRoot":""}